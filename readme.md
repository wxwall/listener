#关于新版本
>现版本的一些问题，如单机部署，单机处理单个IP，性能慢且耗资源,运维的时候只能通过脚本发现哪些侦听故障，侦听故障只能通过人工来排查，对一些简单的问题无法自动解决，有时候出现侦听突然无故不处理，只能通过重启的方式解决。且生产上还出现读、处理分开部署，应用程序写redis来解决连接问题。前后端机器多台部署，监控页面打开卡死，分页出错等一系列问题。本着让运维简单，让程序更高效，让故障更少的原则，对原有系统作升级改造难度都无法达到预期的情况下，便有了推到重来的想法，目前新一版程序还在框架合理性，功能完善性方面做开发测试，以下列出新版本与老版本的一些差异
1. 用线程池技术代替原来的仿线程池技术
2. 用连接池技术代替原来的单连接
3. 用定时任务来替换原来的while循环创建任务
4. 用新的springboot替代原来的web程序，开发更简单快速
5. 用maven管理整合打包测试发布
6. 连接失败自动加入队列计数来自动重新连接替换原来只能通过脚本重发
7. 对于异常处理更智能的监控
8. 用集群方式部署替换原来单机部署
9. 用keepalive来保证程序高可用替换原来人工脚本运维发现机器故障
10. 用springCloud统一配置替换原来的MDA单机配置，包含每次配置的版本管理
11. 用movc集成测试，让程序更加健壮
12. 用jar包集成tomcat方式替换原来war包发布至was的方式
13. 用git方式替换原来svn版本管理
14. 用统一异常处理来保证程序异常的可读性
15. 用bootstrap来做前端监控页面，并提供一些异常监控，访问成功率等直观的操作

###前期规划
* 验证重新规划新版本可行性
* 搭建新的框架验证是否符合集群条件
* 功能开发测试
* 功能的验证
* 单机能否支持测试环境单表能力
* 先上测试环境
* 测试分省路由
* 单表压力测试
* 测试多线程情况下单机处理能力
* 功能测试
* 单机测试批量处理能力
* 单机测试环境测试全国侦听处理能力
* 多机部署，测试多机各自处理省份能力

###一些与老版本的差异
* 是否真的需要读侦听与处理侦听分开，新版本是不分开，理由是读一个侦听并不消耗什么性能，性能瓶颈都在处理侦听的远程调上，如果采用线程池的异步调用+连接池，这样可以采用批量保存数库的方式，理论上更加简单与高效，读侦听读出来数据放到内存队列里。
* 如果读侦听与处理侦听分开，那么将读侦听读出来的数据全部发送到中间件MQ里边，然后就是统一由处理侦听来处理MQ的消息。也能达到统一处理的目的，这样程序分开，会带来一个问题，就是一但处理侦听处理不过来，那么读侦听是无法感知处理程序是慢还是挂机了。
* 如果读侦听和写侦听分开，势必会增加程序的难度。对于前期开发会是一个挑战。我是考虑了很久，还是先把第一版的程序写出来，能不能达到预期效果后再来做这个读和处理的分离的考虑。因为读和处理的分离确实是性能达到瓶颈的一个拆分点。
